---
export const prerender = true;

import SecondaryPageLayout from '@components/templates/layout/SecondaryPageLayout.astro';
import ContactForm from '@components/common/contact/ContactForm.astro';
import { getDictionary } from '@i18n/dictionaries.js';
import { generateContactBreadcrumbs } from '@utils/breadcrumbUtils.js';
import { generateCommonStaticPaths } from '@utils/pageUtils';
import { getContact } from '@apis/common.js';

// 使用 Astro 内置的 i18n 路由
export async function getStaticPaths() {
  return generateCommonStaticPaths();
}

const { lang } = Astro.props;
const t = await getDictionary(lang);
const contact = (await getContact(lang)) || {};

// 面包屑导航
const breadcrumbs = generateContactBreadcrumbs(lang);


---

<SecondaryPageLayout
  title={contact.title || t.contact.page_title}
  breadcrumbs={breadcrumbs}
  currentSection="contact"
  contentType="content"
  lang={lang}
  pageType="contact"
  hideSidebar={true}
>
  <div class="grid grid-cols-1 gap-8">
    <!-- 富文本内容 -->
    <div class="bg-white rounded-lg p-8 shadow-sm" set:html={contact.details}></div>
    
    <!-- 联系表单 - 使用通用组件 -->
    <div class="bg-white rounded-lg p-8 shadow-sm">
      <ContactForm 
        id="contact-page-form"
        title={t.contact.form.title}
        description={t.contact.form.description}
        showTitle={true}
        showDescription={true}
        layout="inline"
        translations={{ form: t.contact.form }}
      />
    </div>
  </div>


</SecondaryPageLayout>

 