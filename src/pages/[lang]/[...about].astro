---
export const prerender = true;

import SecondaryPageLayout from "@components/templates/layout/SecondaryPageLayout.astro";
import { getDictionary } from "@i18n/dictionaries";
import { generateCategoryBreadcrumbs } from "@utils/breadcrumbUtils";
import RichText from "@components/common/layout/RichText.astro";
import StaticPaths, { type PageProps } from "@utils/StaticPaths";
// 使用 Astro 内置的 i18n 路由
export async function getStaticPaths() {
  const paths = await new StaticPaths().generateAboutStaticPaths();
  paths.forEach((item) => {
    (item.params as any).about = (item.params as any).about !== '/about' ? '/about' + (item.params as any).about : '/about';
  })
  return paths;
}

const { lang, pages = { currentPage: 1, totalPages: 1, items: [] } } = Astro.props as PageProps;


// 页面数据
const { item } = pages;

// 面包屑导航
const breadcrumbs = await generateCategoryBreadcrumbs(lang, 'about', item && item.url_slug !== '/about' ? { path: item.url_slug, name: item.title } : []);

const t = await getDictionary(lang);
---

<SecondaryPageLayout
  title={item.title || t.about.title}
  breadcrumbs={breadcrumbs}
  currentSection="about"
  contentType="content"
  lang={lang}
  pageType="about"
  showListDescription={true}
>
  <RichText lang={lang} content={item.details} />
</SecondaryPageLayout>

