---
export const prerender = true;

import SecondaryPageLayout from '../components/templates/SecondaryPageLayout.astro';
import GridList from '../components/templates/GridList.astro';
import Pagination from '../components/templates/Pagination.astro';
import { allCases } from '../data/cases.js';

// 分页配置
const itemsPerPage = 6; // 每页显示6个案例（2行x3列）
const totalPages = Math.ceil(allCases.length / itemsPerPage);
const currentPage = 1; // 第一页
const displayCases = allCases.slice(0, itemsPerPage);

// 转换案例数据格式以适配GridList组件
const gridItems = displayCases.map(caseItem => ({
  id: caseItem.id,
  title: caseItem.title,
  image: caseItem.image,
  excerpt: caseItem.excerpt,
  category: caseItem.category,
  href: `/case/${caseItem.id}` // 假设有详情页面
}));

// 面包屑导航
const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Cases' }
];
---

<SecondaryPageLayout 
  title="Customer Cases"
  description="Discover how our machinery solutions have helped customers achieve success across various industries"
  breadcrumbs={breadcrumbs}
  currentSection="cases"
  contentType="grid"
>
  <!-- 案例网格 -->
  <GridList 
    items={gridItems}
    itemsPerRow={3}
    maxRows={2}
    mode="case"
  />
  
  <!-- 分页 -->
  <Pagination 
    currentPage={currentPage}
    totalPages={totalPages}
    baseUrl="/case"
  />
</SecondaryPageLayout> 