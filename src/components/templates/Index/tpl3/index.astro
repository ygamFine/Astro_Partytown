---
// tpl3 模板组件 - 包含自己的头部和底部
import Header from './Header.astro';
import FooterSection from './FooterSection.astro';
import FullScreenBanner from './FullScreenBanner.astro';
import ProductShowcase from './ProductShowcase.astro';
import StatsSection from './StatsSection.astro';
import HotRecommendedProducts from './HotRecommendedProduct.astro';
import FrontContactUs from './FrontContactUs.astro';
import CustomerCases from './CustomerCases.astro';
import CustomerNews from './CustomerNews.astro';

import { themeConfig } from '@config/theme.js';
import { getTpl3Content } from '@apis/template';
import { getDictionary } from '@i18n/dictionaries.ts';
import { getSiteConfiguration } from "@apis/common.js";

// 从 props 获取语言参数
export interface Props {
    lang: string;
}

const { lang } = Astro.props;
const t = await getDictionary(lang);

// 获取 tpl3 模板的内容数据
const tpl3pageData = await getTpl3Content(lang);
// 获取页面宽度配置
const getPageWidth = () => {
    return themeConfig.layout.dynamicWidth.getPageWidth('home');
};
const pageWidth = getPageWidth();

// 获取网站配置信息
let siteConfiguration = {};
try {
    siteConfiguration = await getSiteConfiguration(lang);
} catch (error) {
    siteConfiguration = {};
}

// 输出完整的 JSON 数据（用于保存到静态文件）
// console.log('====== tpl3 页面数据 ======');
// // console.log('数据内容:', tpl3pageData.companyIntroduction);
// console.log('JSON格式:', JSON.stringify(tpl3pageData.companyIntroduction, null, 2));
// console.log('==========================');
---


    <Header siteConfiguration={siteConfiguration} />
    <FullScreenBanner />
    <!-- <div class="container mx-auto px-4" style={`max-width: ${pageWidth}`}> -->
    <div class="mx-auto">
        <ProductShowcase data={tpl3pageData?.productShowcase} lang={lang} />
        <StatsSection companyData={tpl3pageData?.companyIntroduction} corporateAdvantages={tpl3pageData?.corporateAdvantages} />
        <HotRecommendedProducts data={tpl3pageData?.hotRecommendedProducts} lang={lang} />
        <FrontContactUs frontContactUs={tpl3pageData?.frontContactUs} />
        <CustomerCases customerCases={tpl3pageData?.customerCases} lang={lang} />
        <CustomerNews customerNews={tpl3pageData?.customerNews} lang={lang} />
    </div>
    <FooterSection />

