---
const { 
  title, 
  description, 
  breadcrumbs, 
  currentSection, 
  contentType = 'grid',
  lang,
  pageType = 'home',
  listDescription,
  showListDescription = false
} = Astro.props;

import Layout from '../../../layouts/Layout.astro';
import Breadcrumb from '../navigation/Breadcrumb.astro';
import Sidebar from './Sidebar.astro';
import { themeConfig } from '../../../config/theme.js';

// 获取页面宽度配置
const getPageWidth = () => {
  return themeConfig.layout.dynamicWidth.getPageWidth(pageType);
};

const pageWidth = getPageWidth();
---

<Layout title={title} description={description} lang={lang} pageType={pageType}>
  <main>
    <!-- Page Header -->
    <section class="bg-gradient-to-r from-red-600 to-red-700 text-white py-20">
      <div class="container mx-auto px-4" style={`max-width: ${pageWidth}`}>
        <div class="text-center">
          <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4">{title}</h1>
        </div>
      </div>
    </section>

    <!-- Breadcrumb -->
    <div class="bg-white border-b">
      <div class="container mx-auto px-4 py-4" style={`max-width: ${pageWidth}`}>
        <Breadcrumb breadcrumbs={breadcrumbs} lang={lang} />
      </div>
    </div>

    <!-- Main Content -->
    <section class="py-12 bg-white">
      <div class="container mx-auto px-4" style={`max-width: ${pageWidth}`}>
        <div class="flex flex-col lg:flex-row gap-8">
          {/* 根据配置决定是否显示侧边栏 */}
          {themeConfig.layout.sidebar.visible && (
            <!-- Left Sidebar -->
            <div class="lg:w-1/4">
              <Sidebar currentSection={currentSection} />
            </div>
          )}

          {/* 根据侧边栏显示状态调整内容区域宽度 */}
          <div class={themeConfig.layout.sidebar.visible ? "lg:w-3/4" : "w-full"}>
            <!-- 内容区域标题 -->
            <div class="mb-8">
              <h1 class="text-3xl font-bold text-gray-900 mb-4">{title}</h1>
              
              {/* 列表描述内容 - 标题下方模式 */}
              {themeConfig.layout.listDescription.displayMode === 'below-title' && 
               showListDescription && listDescription && (
                <div class="mb-6">
                  <p class="text-lg text-gray-600 leading-relaxed">
                    {listDescription}
                  </p>
                </div>
              )}
            </div>
            
            <!-- Content Slot -->
            <div class={`content-area ${contentType}`}>
              <slot />
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  .content-area.grid {
    @apply space-y-8;
  }
  
  .content-area.list {
    @apply space-y-6;
  }
</style> 