---
// 演示公共语言文件的使用
import { getCommonText, getPlaceholder, getButtonText, getValidationMessage, getCommonTextSync } from '../lib/commonTranslations.js';

export interface Props {
  lang: string;
}

const { lang } = Astro.props;

// 加载公共语言数据
const common = await import(`../locales/${lang}/common.json`);
const commonData = common.default;

// 获取一些示例文本
const searchPlaceholder = await getPlaceholder(lang, 'search');
const submitButton = await getButtonText(lang, 'submit');
const requiredMessage = await getValidationMessage(lang, 'required');
const minLengthMessage = await getValidationMessage(lang, 'min_length', { min: 6 });
const searchNoResults = await getCommonText(lang, 'search.no_results');
---

<div class="common-translations-demo">
  <h2>公共语言文件演示 - {lang}</h2>
  
  <div class="demo-section">
    <h3>占位符示例</h3>
    <div class="demo-item">
      <label>搜索框占位符:</label>
      <input type="text" placeholder={searchPlaceholder} readonly />
    </div>
    <div class="demo-item">
      <label>姓名占位符:</label>
      <input type="text" placeholder={getCommonTextSync(commonData, 'placeholders.name')} readonly />
    </div>
    <div class="demo-item">
      <label>邮箱占位符:</label>
      <input type="email" placeholder={getCommonTextSync(commonData, 'placeholders.email')} readonly />
    </div>
  </div>

  <div class="demo-section">
    <h3>按钮文本示例</h3>
    <div class="demo-buttons">
      <button class="btn btn-primary">{submitButton}</button>
      <button class="btn btn-secondary">{getCommonTextSync(commonData, 'buttons.cancel')}</button>
      <button class="btn btn-success">{getCommonTextSync(commonData, 'buttons.save')}</button>
      <button class="btn btn-danger">{getCommonTextSync(commonData, 'buttons.delete')}</button>
    </div>
  </div>

  <div class="demo-section">
    <h3>验证消息示例</h3>
    <div class="demo-messages">
      <div class="message error">{requiredMessage}</div>
      <div class="message error">{minLengthMessage}</div>
      <div class="message error">{getCommonTextSync(commonData, 'validation.email_invalid')}</div>
    </div>
  </div>

  <div class="demo-section">
    <h3>状态文本示例</h3>
    <div class="demo-status">
      <span class="status loading">{getCommonTextSync(commonData, 'status.loading')}</span>
      <span class="status success">{getCommonTextSync(commonData, 'status.success')}</span>
      <span class="status error">{getCommonTextSync(commonData, 'status.error')}</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>搜索相关示例</h3>
    <div class="demo-search">
      <div class="search-result">{searchNoResults}</div>
      <div class="search-tip">{getCommonTextSync(commonData, 'search.search_tips')}</div>
      <div class="search-suggestion">{getCommonTextSync(commonData, 'search.try_different_keywords')}</div>
    </div>
  </div>

  <div class="demo-section">
    <h3>分类标签示例</h3>
    <div class="demo-categories">
      <span class="category">{getCommonTextSync(commonData, 'categories.all')}</span>
      <span class="category">{getCommonTextSync(commonData, 'categories.product')}</span>
      <span class="category">{getCommonTextSync(commonData, 'categories.news')}</span>
      <span class="category">{getCommonTextSync(commonData, 'categories.case')}</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>操作文本示例</h3>
    <div class="demo-actions">
      <span class="action">{getCommonTextSync(commonData, 'actions.view')}</span>
      <span class="action">{getCommonTextSync(commonData, 'actions.edit')}</span>
      <span class="action">{getCommonTextSync(commonData, 'actions.delete')}</span>
      <span class="action">{getCommonTextSync(commonData, 'actions.add')}</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>时间文本示例</h3>
    <div class="demo-time">
      <span class="time">{getCommonTextSync(commonData, 'time.today')}</span>
      <span class="time">{getCommonTextSync(commonData, 'time.yesterday')}</span>
      <span class="time">{getCommonTextSync(commonData, 'time.this_week')}</span>
      <span class="time">{getCommonTextSync(commonData, 'time.this_month')}</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>分页文本示例</h3>
    <div class="demo-pagination">
      <span class="pagination">{getCommonTextSync(commonData, 'pagination.previous')}</span>
      <span class="pagination">{getCommonTextSync(commonData, 'pagination.next')}</span>
      <span class="pagination">{getCommonTextSync(commonData, 'pagination.page')} 1 {getCommonTextSync(commonData, 'pagination.of')} 10</span>
    </div>
  </div>

  <div class="demo-section">
    <h3>单位文本示例</h3>
    <div class="demo-units">
      <span class="unit">5 {getCommonTextSync(commonData, 'units.pieces')}</span>
      <span class="unit">100 {getCommonTextSync(commonData, 'units.kg')}</span>
      <span class="unit">2 {getCommonTextSync(commonData, 'units.hours')}</span>
      <span class="unit">50{getCommonTextSync(commonData, 'units.percent')}</span>
    </div>
  </div>
</div>

<style>
  .common-translations-demo {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .demo-section {
    margin-bottom: 2rem;
    padding: 1.5rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background: #f9fafb;
  }

  .demo-section h3 {
    margin: 0 0 1rem 0;
    color: #374151;
    font-size: 1.1rem;
    font-weight: 600;
  }

  .demo-item {
    margin-bottom: 1rem;
  }

  .demo-item label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: #6b7280;
  }

  .demo-item input {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    background: #fff;
    font-size: 0.9rem;
  }

  .demo-buttons {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .btn {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 4px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .btn:hover {
    opacity: 0.8;
  }

  .btn-primary {
    background: #3b82f6;
    color: white;
  }

  .btn-secondary {
    background: #6b7280;
    color: white;
  }

  .btn-success {
    background: #10b981;
    color: white;
  }

  .btn-danger {
    background: #ef4444;
    color: white;
  }

  .demo-messages {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .message {
    padding: 0.75rem;
    border-radius: 4px;
    font-size: 0.9rem;
  }

  .message.error {
    background: #fef2f2;
    color: #dc2626;
    border: 1px solid #fecaca;
  }

  .demo-status {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .status {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .status.loading {
    background: #fef3c7;
    color: #d97706;
  }

  .status.success {
    background: #d1fae5;
    color: #059669;
  }

  .status.error {
    background: #fee2e2;
    color: #dc2626;
  }

  .demo-search {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .search-result, .search-tip, .search-suggestion {
    padding: 0.75rem;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.9rem;
  }

  .demo-categories {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .category {
    padding: 0.25rem 0.75rem;
    background: #e5e7eb;
    border-radius: 12px;
    font-size: 0.8rem;
    color: #374151;
  }

  .demo-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .action {
    padding: 0.5rem 1rem;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.9rem;
    color: #374151;
  }

  .demo-time {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .time {
    padding: 0.5rem 1rem;
    background: #dbeafe;
    border-radius: 4px;
    font-size: 0.9rem;
    color: #1e40af;
  }

  .demo-pagination {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .pagination {
    padding: 0.5rem 1rem;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.9rem;
    color: #374151;
  }

  .demo-units {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .unit {
    padding: 0.5rem 1rem;
    background: #f0fdf4;
    border-radius: 4px;
    font-size: 0.9rem;
    color: #166534;
  }
</style> 