---
import Header from "../components/Header.astro";
import FooterSection from "../components/FooterSection.astro";
import GTMLoader from "../components/GTMLoader.astro";

export interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = "å±±ä¸œæ°¸å®‰å»ºè®¾æœºæ¢°é›†å›¢æœ‰é™å…¬å¸ - ä¸“ä¸šå·¥ç¨‹æœºæ¢°åˆ¶é€ å•†",
} = Astro.props;
---

<!doctype html>
<html lang="zh-CN">
  <head>
    
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- å­—ä½“é¢„åŠ è½½å’Œä¼˜åŒ– -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- å…³é”®å›¾ç‰‡é¢„åŠ è½½ - æŒ‰ä¼˜å…ˆçº§æ’åº -->
    <link rel="preload" href="/images/shouji-banner1-ultra.webp?v=3" as="image" fetchpriority="high" media="(max-width: 768px)" />
    <link rel="preload" href="/images/optimized/banner3-optimized.webp?v=1" as="image" fetchpriority="high" media="(min-width: 769px)" />
    <link rel="preload" href="/images/logo.png.webp" as="image" fetchpriority="high" />
    <link rel="preload" href="/main-product.svg" as="image" fetchpriority="high" media="(min-width: 769px)" />
    <link rel="preload" href="/images/skid1-400.webp" as="image" fetchpriority="low" />
    <link rel="preload" href="/backhoe.webp" as="image" fetchpriority="low" />
    
    <!-- DNSé¢„è§£æ -->
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    <link rel="dns-prefetch" href="//cdn.huazhi.cloud" />
    
    <!-- SEOä¼˜åŒ– -->
    <meta
      name="keywords"
      content="æ»‘ç§»è£…è½½æœº,å·¥ç¨‹æœºæ¢°,å»ºç­‘è®¾å¤‡,å±±ä¸œæ°¸å®‰,YONAN"
    />
    <meta name="author" content="å±±ä¸œæ°¸å®‰å»ºè®¾æœºæ¢°é›†å›¢æœ‰é™å…¬å¸" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />

    <!-- ğŸ¯ ä¼˜åŒ–çš„ GTM åŠ è½½å™¨ - æ”¯æŒå¼€å‘/ç”Ÿäº§ç¯å¢ƒ -->
    <GTMLoader />

    <!-- å†…è”å…³é”®CSS - é˜²æ­¢æ¸²æŸ“é˜»å¡ -->
    <style>
      /* å…¨å±€é‡ç½®å’ŒåŸºç¡€æ ·å¼ - å…³é”®è·¯å¾„ */
      *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      html {
        scroll-behavior: smooth;
        font-size: 10px;
        overflow-x: hidden;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        font-display: swap;
        line-height: 1.6;
        color: #333;
        background: #fff;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeSpeed;
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
      }
      
      /* æ ¸å¿ƒå¸ƒå±€ - é¦–å±å¿…éœ€ */
      .container {
        max-width: 80rem;
        margin: 0 auto;
        padding: 0 1rem;
        width: 100%;
        box-sizing: border-box;
      }
      
      /* ä¸»å†…å®¹åŒºåŸŸé˜²æ­¢æº¢å‡º */
      main {
        width: 100%;
        overflow-x: hidden;
        position: relative;
      }
      
      /* æ‰€æœ‰sectioné˜²æ­¢æº¢å‡º */
      section {
        width: 100%;
        overflow-x: hidden;
        position: relative;
        box-sizing: border-box;
      }
      
      /* é˜²æ­¢CLSçš„å›ºå®šå°ºå¯¸ */
      @media (max-width: 768px) {
        .mobile-banner-container {
          height: 200px;
          contain: layout;
        }
        
        /* ç§»åŠ¨ç«¯é¢å¤–é˜²æŠ¤ */
        body, html {
          position: relative;
        }
        
        * {
          box-sizing: border-box;
        }
        
        section, div, main, .container {
          max-width: 100vw;
          overflow-x: hidden;
        }
      }

      /* Headerå›ºå®šé«˜åº¦ - é˜²æ­¢CLS */
      header {
        height: 80px;
        contain: layout;
      }

      @media (max-width: 768px) {
        header {
          height: 60px;
        }
      }

      /* å›¾ç‰‡åŠ è½½ä¼˜åŒ– */
      img {
        max-width: 100%;
        height: auto;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
      }

      /* æ€§èƒ½ä¼˜åŒ–çš„æŒ‰é’® */
      .btn-primary {
        background: #dc2626;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 700;
        text-decoration: none;
        display: inline-block;
        will-change: transform;
        transition: transform 0.2s ease;
      }
      
      .btn-primary:hover {
        transform: translateY(-1px);
      }
      
      .btn-secondary {
        background: #e5e7eb;
        color: #1f2937;
        padding: 0.75rem 2rem;
        border-radius: 0.5rem;
        font-weight: 700;
        font-size: 1.125rem;
        text-decoration: none;
        display: inline-block;
        will-change: transform;
        transition: transform 0.2s ease;
      }

      .btn-secondary:hover {
        transform: translateY(-1px);
      }

      /* å…³é”®åŠ¨ç”»ä¼˜åŒ– */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* è°ƒæ•´ç§»åŠ¨ç«¯ banner ä¸äº§å“é¡ºåº - é˜²æ­¢CLS */
      @media (max-width: 767px) {
        #main-content {
          display: flex;
          flex-direction: column;
        }
        #main-content > section.hero-mobile {
          order: -1 !important;
          contain: layout;
        }
        #main-content > section.product-showcase {
          order: 0 !important;
          contain: layout;
        }
      }

      /* æ‡’åŠ è½½å›¾ç‰‡ä¼˜åŒ– */
      img[loading="lazy"] {
        transition: opacity 0.3s ease;
      }

      img[loading="lazy"]:not([src]) {
        opacity: 0;
      }

      /* è§¦æ‘¸ä¼˜åŒ– */
      .touch-target {
        touch-action: manipulation;
        min-height: 44px;
        min-width: 44px;
      }

      /* éª¨æ¶å±æ ·å¼ */
      .skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      /* å†…è”å­—ä½“æ ·å¼ - ä¼˜åŒ–æ€§èƒ½ */
      @font-face {
        font-family: 'System-UI';
        src: local('system-ui'), local('-apple-system'), local('BlinkMacSystemFont');
        font-display: swap;
      }

      /* ç®€å•çš„åŠ¨ç”»ç³»ç»Ÿ */
      .animate-fade-up {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .animate-fade-up.animate-in {
        opacity: 1;
        transform: translateY(0);
      }

      .animate-fade-left {
        opacity: 0;
        transform: translateX(-30px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .animate-fade-left.animate-in {
        opacity: 1;
        transform: translateX(0);
      }

      .animate-fade-right {
        opacity: 0;
        transform: translateX(30px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .animate-fade-right.animate-in {
        opacity: 1;
        transform: translateX(0);
      }

      .animate-scale-up {
        opacity: 0;
        transform: scale(0.9);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      }

      .animate-scale-up.animate-in {
        opacity: 1;
        transform: scale(1);
      }

      /* å»¶è¿ŸåŠ¨ç”» */
      .animate-delay-100 { transition-delay: 0.1s; }
      .animate-delay-200 { transition-delay: 0.2s; }
      .animate-delay-300 { transition-delay: 0.3s; }
      .animate-delay-400 { transition-delay: 0.4s; }
      .animate-delay-500 { transition-delay: 0.5s; }
      .animate-delay-600 { transition-delay: 0.6s; }
      .animate-delay-700 { transition-delay: 0.7s; }
      .animate-delay-800 { transition-delay: 0.8s; }
      .animate-delay-900 { transition-delay: 0.9s; }

      /* å¡ç‰‡æ‚¬åœåŠ¨ç”» */
      .card-hover-animate {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .card-hover-animate:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }

      /* æŒ‰é’®æ‚¬åœæ•ˆæœ */
      .btn-hover-animate {
        transition: transform 0.3s ease;
      }

      .btn-hover-animate:hover {
        transform: translateY(-2px);
      }

      /* æ•°å­—è®¡æ•°å™¨ */
      .counter-number {
        font-variant-numeric: tabular-nums;
      }
    </style>

    <title>{title}</title>
  </head>
  <body>

    <Header />
    
    <main id="main-content">
      <slot />
    </main>


    <!-- å¤§å¹…å»¶è¿Ÿå®¢æœè„šæœ¬åŠ è½½ -->
    <script> 
      window.addEventListener('load', () => {
        setTimeout(() => {
          const hm = document.createElement("script");
          hm.src = "https://cdn.huazhi.cloud/hzchat/dist/livechat.js?time="+new Date().getTime();
          hm.setAttribute('_extID',"309-313-7n1iAECE");
          document.head.appendChild(hm);
        }, 10000); // 10ç§’åå†åŠ è½½å®¢æœ
      });
    </script>

    <!-- ç®€å•åŠ¨ç”»ç³»ç»Ÿ -->
    <script is:inline>
      // ç®€å•çš„åŠ¨ç”»ç³»ç»Ÿ
      (function() {
        // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
        if (!window.IntersectionObserver) {
          // ä¸æ”¯æŒçš„è¯ç›´æ¥æ˜¾ç¤ºæ‰€æœ‰å…ƒç´ 
          document.querySelectorAll('.animate-fade-up, .animate-fade-left, .animate-fade-right, .animate-scale-up').forEach(el => {
            el.classList.add('animate-in');
          });
          return;
        }

        // åˆ›å»ºè§‚å¯Ÿå™¨
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('animate-in');
              observer.unobserve(entry.target);
            }
          });
        }, {
          threshold: 0.1,
          rootMargin: '50px'
        });

        // æ•°å­—è®¡æ•°åŠ¨ç”»
        function animateCounter(element, target, duration = 2000) {
          let start = 0;
          const increment = target / (duration / 16);
          
          function update() {
            start += increment;
            if (start < target) {
              element.textContent = Math.floor(start).toLocaleString();
              requestAnimationFrame(update);
            } else {
              element.textContent = target.toLocaleString();
            }
          }
          
          update();
        }

        // ç»Ÿè®¡æ•°å­—è§‚å¯Ÿå™¨
        const counterObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const target = entry.target.dataset.count;
              if (target) {
                animateCounter(entry.target, parseInt(target));
                counterObserver.unobserve(entry.target);
              }
            }
          });
        }, { threshold: 0.5 });

        // åˆå§‹åŒ–
        function init() {
          // è§‚å¯ŸåŠ¨ç”»å…ƒç´ 
          document.querySelectorAll('.animate-fade-up, .animate-fade-left, .animate-fade-right, .animate-scale-up').forEach(el => {
            observer.observe(el);
          });

          // è§‚å¯Ÿè®¡æ•°å™¨
          document.querySelectorAll('.counter-number[data-count]').forEach(el => {
            counterObserver.observe(el);
          });
        }

        // é¡µé¢åŠ è½½ååˆå§‹åŒ–
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', init);
        } else {
          init();
        }
      })();
    </script>

    <FooterSection />
  </body>
</html>
