# 视图切换功能实现说明

## 功能概述

在产品、新闻、案例的二级模板页面中添加了卡片视图和列表视图的切换功能，用户可以在这两种视图模式之间自由切换。

## 实现的功能

### 1. 视图切换组件 (ViewToggle.astro)
- 位置：`src/components/templates/common/ViewToggle.astro`
- 功能：
  - 显示当前总数（如：显示 123 件）
  - 提供卡片视图和列表视图的切换按钮
  - 按钮状态会根据当前视图模式高亮显示
  - 支持国际化文本

### 2. 增强版列表组件 (EnhancedGridList.astro)
- 位置：`src/components/templates/common/EnhancedGridList.astro`
- 功能：
  - 保持原有的卡片视图功能不变
  - 新增列表视图模式
  - 支持产品、新闻、案例三种模式
  - 响应式设计，适配移动端

### 3. 视图切换JavaScript (viewToggle.js)
- 位置：`src/scripts/viewToggle.js`
- 功能：
  - 处理视图切换逻辑
  - 保存用户偏好到localStorage
  - 页面加载时恢复用户偏好设置
  - 更新按钮状态

## 更新的页面

### 1. 产品页面
- 文件：`src/pages/[lang]/products/[...page].astro`
- 更新：添加了视图切换控件和增强版列表组件

### 2. 新闻页面
- 文件：`src/pages/[lang]/news/[...page].astro`
- 更新：添加了视图切换控件和增强版列表组件
- 特殊功能：新闻模式支持日期显示

### 3. 案例页面
- 文件：`src/pages/[lang]/case/[...page].astro`
- 更新：添加了视图切换控件和增强版列表组件

## 视图模式对比

### 卡片视图（原有功能保持不变）
- 网格布局显示
- 悬停效果
- 产品卡片支持价格显示和联系按钮
- 案例卡片支持悬停标题显示
- 新闻卡片支持日期显示

### 列表视图（新增功能）
- 水平布局，图片在左，内容在右
- 更大的图片显示区域
- 更详细的内容展示
- 产品模式：显示价格、优势、操作按钮
- 新闻模式：显示日期、摘要、查看按钮
- 案例模式：显示摘要、查看按钮

## 技术特点

1. **保持兼容性**：原有的GridList组件完全保持不变
2. **渐进增强**：新功能作为增强功能添加，不影响现有功能
3. **用户偏好**：自动保存和恢复用户的视图偏好
4. **响应式设计**：在移动端和桌面端都有良好的显示效果
5. **国际化支持**：支持多语言文本显示

## 使用方法

1. 访问产品、新闻或案例页面
2. 在页面顶部找到视图切换按钮
3. 点击网格图标切换到卡片视图
4. 点击列表图标切换到列表视图
5. 用户的偏好设置会自动保存

## 文件结构

```
src/
├── components/templates/common/
│   ├── ViewToggle.astro          # 视图切换控件
│   ├── EnhancedGridList.astro    # 增强版列表组件
│   └── GridList.astro            # 原有组件（未修改）
├── scripts/
│   └── viewToggle.js             # 视图切换JavaScript
└── pages/[lang]/
    ├── products/[...page].astro  # 产品页面（已更新）
    ├── news/[...page].astro      # 新闻页面（已更新）
    └── case/[...page].astro      # 案例页面（已更新）
```

## 注意事项

1. 原有的卡片视图功能完全保持不变
2. 新增的列表视图功能是对现有功能的增强
3. 所有修改都是增量式的，不会影响现有功能
4. 用户偏好设置使用localStorage存储，清除浏览器数据会重置偏好

