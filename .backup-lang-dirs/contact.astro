---
export const prerender = true;
export const revalidate = 3600; // 1小时

import Layout from '../../layouts/Layout.astro';
import SecondaryPageLayout from '../../components/templates/layout/SecondaryPageLayout.astro';
import Breadcrumb from '../../components/templates/navigation/Breadcrumb.astro';
import ContactButtons from '../../components/common/contact/ContactButtons.astro';

import ContactForm from '../../components/common/contact/ContactForm.astro';
import RichTextRenderer from '../../components/templates/common/RichTextRenderer.astro';
import getDictionary from '../../i18n/dictionaries.js';
import { generateContactBreadcrumbs } from '../../lib/breadcrumbUtils.js';
import { themeConfig } from '../../config/theme.js';
import { generateStaticPaths } from '../../lib/i18n-routes.js';

// 使用 Astro 内置的 i18n 路由
export async function getStaticPaths() {
  return generateStaticPaths();
}

const { lang } = Astro.params;
const t = getDictionary(lang);

// 面包屑导航
const breadcrumbs = generateContactBreadcrumbs(lang);

// 联系页面的富文本内容
const contactContent = [
  {
    type: 'paragraph',
    children: [
      {
        type: 'text',
        text: t.contact.description
      }
    ]
  },
  {
    type: 'heading',
    level: 2,
    children: [
      {
        type: 'text',
        text: t.contact.subtitle
      }
    ]
  },
  {
    type: 'list',
    format: 'unordered',
    children: [
      {
        type: 'list-item',
        children: [
          {
            type: 'text',
            text: '专业的技术团队，提供全方位的技术支持'
          }
        ]
      },
      {
        type: 'list-item',
        children: [
          {
            type: 'text',
            text: '丰富的行业经验，了解客户需求'
          }
        ]
      },
      {
        type: 'list-item',
        children: [
          {
            type: 'text',
            text: '快速响应机制，及时解决客户问题'
          }
        ]
      },
      {
        type: 'list-item',
        children: [
          {
            type: 'text',
            text: '完善的售后服务，保障客户权益'
          }
        ]
      }
    ]
  },
  {
    type: 'heading',
    level: 2,
    children: [
      {
        type: 'text',
        text: '服务承诺'
      }
    ]
  },
  {
    type: 'paragraph',
    children: [
      {
        type: 'text',
        text: '我们承诺为客户提供最优质的产品和服务，确保每一个项目都能达到客户的期望。我们的团队将全程跟进，确保项目的顺利进行。'
      }
    ]
  }
];
---

<SecondaryPageLayout
  title={t.contact.page_title}
  breadcrumbs={breadcrumbs}
  currentSection="contact"
  contentType="content"
  lang={lang}
  pageType="contact"
  showContentTitle={false}
>
  <div class="grid grid-cols-1 gap-8">
    <!-- 富文本内容 -->
    <div class="bg-white rounded-lg p-8 shadow-sm">
      <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
        <div class="w-1 h-6 bg-red-600 mr-3"></div>
        {t.contact.page_title}
      </h2>
      <RichTextRenderer content={contactContent} />
    </div>
    
    <!-- 联系表单 - 使用通用组件 -->
    <div class="bg-white rounded-lg p-8 shadow-sm">
      <ContactForm 
        id="contact-page-form"
        title={t.contact.form.title}
        description={t.contact.form.description}
        showTitle={true}
        showDescription={true}
        layout="inline"
        translations={{ form: t.contact.form }}
      />
    </div>
  </div>


</SecondaryPageLayout>

 